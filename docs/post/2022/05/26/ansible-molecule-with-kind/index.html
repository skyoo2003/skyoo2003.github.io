<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Ansible Molecule with Kind - 도커를 활용한 쿠버네티스 자동화 테스트 작성 | Devlog in the SKY</title><link rel=canonical href=https://skyoo2003.github.io/post/2022/05/26/ansible-molecule-with-kind/><meta name=description content="Devlog in the SKY - Yet another developer's blog"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Ansible Molecule with Kind - 도커를 활용한 쿠버네티스 자동화 테스트 작성"><meta property="og:description" content="Ansible Molecule with KIND (Kubernetes IN Docker)  Ansible Molecule은 Ansible roles를 가상화 기술을 통해 환경을 고립시켜서 환경 구성을 테스트할 수 있게 도와주는 도구. KIND는 Kubernetes 클러스터를 도커 컨테이너로 동작시켜주는 도구. 쿠버네티스 클러스터 위에서 리소스를 배치하고 리소스를 확인하거나 어플리케이션 동작을 검증하는 용도로 사용함. (ex, Helm Chart)  제약사항  Docker Engine 설치 KIND 설치 Python libraries 설치  pip install molecule[docker,lint] molecule-docker!=0.3.4 openshift  molecule-docker 0.3.4 버전은 문제가 있어 사용 금지     Ansible collections 설치  ansible-galaxy collection install community."><meta property="og:type" content="article"><meta property="og:url" content="https://skyoo2003.github.io/post/2022/05/26/ansible-molecule-with-kind/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-26T22:08:24+09:00"><meta property="article:modified_time" content="2022-05-26T22:08:24+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ansible Molecule with Kind - 도커를 활용한 쿠버네티스 자동화 테스트 작성"><meta name=twitter:description content="Ansible Molecule with KIND (Kubernetes IN Docker)  Ansible Molecule은 Ansible roles를 가상화 기술을 통해 환경을 고립시켜서 환경 구성을 테스트할 수 있게 도와주는 도구. KIND는 Kubernetes 클러스터를 도커 컨테이너로 동작시켜주는 도구. 쿠버네티스 클러스터 위에서 리소스를 배치하고 리소스를 확인하거나 어플리케이션 동작을 검증하는 용도로 사용함. (ex, Helm Chart)  제약사항  Docker Engine 설치 KIND 설치 Python libraries 설치  pip install molecule[docker,lint] molecule-docker!=0.3.4 openshift  molecule-docker 0.3.4 버전은 문제가 있어 사용 금지     Ansible collections 설치  ansible-galaxy collection install community."><link rel=stylesheet href=https://skyoo2003.github.io/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://skyoo2003.github.io/images/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-85297310-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://skyoo2003.github.io/post/2022/05/26/ansible-molecule/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&text=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&title=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&is_video=false&description=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1&body=Check out this article: https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&title=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&title=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&name=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1&description=Ansible%20Molecule%20with%20KIND%20%28Kubernetes%20IN%20Docker%29%20%20Ansible%20Molecule%ec%9d%80%20Ansible%20roles%eb%a5%bc%20%ea%b0%80%ec%83%81%ed%99%94%20%ea%b8%b0%ec%88%a0%ec%9d%84%20%ed%86%b5%ed%95%b4%20%ed%99%98%ea%b2%bd%ec%9d%84%20%ea%b3%a0%eb%a6%bd%ec%8b%9c%ec%bc%9c%ec%84%9c%20%ed%99%98%ea%b2%bd%20%ea%b5%ac%ec%84%b1%ec%9d%84%20%ed%85%8c%ec%8a%a4%ed%8a%b8%ed%95%a0%20%ec%88%98%20%ec%9e%88%ea%b2%8c%20%eb%8f%84%ec%99%80%ec%a3%bc%eb%8a%94%20%eb%8f%84%ea%b5%ac.%20KIND%eb%8a%94%20Kubernetes%20%ed%81%b4%eb%9f%ac%ec%8a%a4%ed%84%b0%eb%a5%bc%20%eb%8f%84%ec%bb%a4%20%ec%bb%a8%ed%85%8c%ec%9d%b4%eb%84%88%eb%a1%9c%20%eb%8f%99%ec%9e%91%ec%8b%9c%ec%bc%9c%ec%a3%bc%eb%8a%94%20%eb%8f%84%ea%b5%ac.%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ed%81%b4%eb%9f%ac%ec%8a%a4%ed%84%b0%20%ec%9c%84%ec%97%90%ec%84%9c%20%eb%a6%ac%ec%86%8c%ec%8a%a4%eb%a5%bc%20%eb%b0%b0%ec%b9%98%ed%95%98%ea%b3%a0%20%eb%a6%ac%ec%86%8c%ec%8a%a4%eb%a5%bc%20%ed%99%95%ec%9d%b8%ed%95%98%ea%b1%b0%eb%82%98%20%ec%96%b4%ed%94%8c%eb%a6%ac%ec%bc%80%ec%9d%b4%ec%85%98%20%eb%8f%99%ec%9e%91%ec%9d%84%20%ea%b2%80%ec%a6%9d%ed%95%98%eb%8a%94%20%ec%9a%a9%eb%8f%84%eb%a1%9c%20%ec%82%ac%ec%9a%a9%ed%95%a8.%20%28ex%2c%20Helm%20Chart%29%20%20%ec%a0%9c%ec%95%bd%ec%82%ac%ed%95%ad%20%20Docker%20Engine%20%ec%84%a4%ec%b9%98%20KIND%20%ec%84%a4%ec%b9%98%20Python%20libraries%20%ec%84%a4%ec%b9%98%20%20pip%20install%20molecule%5bdocker%2clint%5d%20molecule-docker%21%3d0.3.4%20openshift%20%20molecule-docker%200.3.4%20%eb%b2%84%ec%a0%84%ec%9d%80%20%eb%ac%b8%ec%a0%9c%ea%b0%80%20%ec%9e%88%ec%96%b4%20%ec%82%ac%ec%9a%a9%20%ea%b8%88%ec%a7%80%20%20%20%20%20Ansible%20collections%20%ec%84%a4%ec%b9%98%20%20ansible-galaxy%20collection%20install%20community." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&t=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Ansible Molecule with Kind - 도커를 활용한 쿠버네티스 자동화 테스트 작성</h1><div class=meta><div class=postdate><time datetime="2022-05-26 22:08:24 +0900 KST" itemprop=datePublished>2022-05-26</time></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/ansible rel=tag>ansible</a>
,
<a class=tag-link href=/tags/testing rel=tag>testing</a></div></div></header><div id=toc><nav id=TableOfContents><ul><li><a href=#제약사항>제약사항</a></li><li><a href=#테스트-시나리오-작성-및-실행>테스트 시나리오 작성 및 실행</a></li><li><a href=#주의사항>주의사항</a></li></ul></nav></div><div class=content itemprop=articleBody><h1 id=ansible-moleculehttpsgithubcomansible-communitymolecule-with-kind-kubernetes-in-dockerhttpsgithubcomkubernetes-sigskind><a href=https://github.com/ansible-community/molecule>Ansible Molecule</a> with <a href=https://github.com/kubernetes-sigs/kind>KIND (Kubernetes IN Docker)</a></h1><ul><li>Ansible Molecule은 Ansible roles를 가상화 기술을 통해 환경을 고립시켜서 환경 구성을 테스트할 수 있게 도와주는 도구.</li><li>KIND는 Kubernetes 클러스터를 도커 컨테이너로 동작시켜주는 도구. 쿠버네티스 클러스터 위에서 리소스를 배치하고 리소스를 확인하거나 어플리케이션 동작을 검증하는 용도로 사용함. (ex, Helm Chart)</li></ul><h2 id=제약사항>제약사항</h2><ul><li><a href=https://docs.docker.com/engine/install/>Docker Engine</a> 설치</li><li><a href=https://kind.sigs.k8s.io/docs/user/quick-start/#installation>KIND</a> 설치</li><li>Python libraries 설치<ul><li><code>pip install molecule[docker,lint] molecule-docker!=0.3.4 openshift</code><ul><li><a href=https://github.com/ansible-community/molecule-docker/issues/57>molecule-docker 0.3.4 버전은 문제가 있어 사용 금지</a></li></ul></li></ul></li><li>Ansible collections 설치<ul><li><code>ansible-galaxy collection install community.kubernetes community.docker</code></li></ul></li></ul><h2 id=테스트-시나리오-작성-및-실행>테스트 시나리오 작성 및 실행</h2><ol start=0><li>Ansible role 생성</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>$ ansible-galaxy role init myrole
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>- Role myrole was created successfully
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>$ tree myrole
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>myrole
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>├── README.md
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>├── defaults
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>│   └── main.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>├── files
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>├── handlers
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>│   └── main.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>├── meta
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>│   └── main.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>├── tasks
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>│   └── main.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>├── templates
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>├── tests
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>│   ├── inventory
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>│   └── test.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>└── vars
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>    └── main.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>$ vi myrole/meta/main.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>---
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>collections:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>  - community.kubernetes
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>    
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>$ vi myrole/tasks/main.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>---
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span>- name: Ensure the K8S Namespace exists.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>  k8s:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>    api_version: v1
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>    kind: Namespace
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>    name: <span style=color:#f1fa8c>&#34;myrole-ns&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span>    kubeconfig: <span style=color:#f1fa8c>&#34;{{ kube_config }}&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span>    state: present
</span></span></code></pre></div><ol><li>Molecule default 시나리오 초기화</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>$ <span style=color:#8be9fd;font-style:italic>cd</span> myrole
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>$ molecule init scenario --dependency-name galaxy --driver-name delegated --provisioner-name ansible --verifier-name ansible default
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>INFO     Initializing new scenario default...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>INFO     Initialized scenario in /path/to/myrole/molecule/default successfully.
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>$ tree molecule
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>molecule
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>└── default
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>    ├── INSTALL.rst
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>    ├── converge.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    ├── create.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    ├── destroy.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>    ├── molecule.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>    └── verify.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#bd93f9>1</span> directory, <span style=color:#bd93f9>6</span> files
</span></span></code></pre></div><ol start=2><li>KIND Config 매니페스트 파일 생성</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>$ mkdir -p molecule/default/manifests
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>$ vi molecule/default/manifests/kindconfig.yaml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>---
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>kind: Cluster
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>apiVersion: kind.x-k8s.io/v1alpha4
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>networking:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>  kubeProxyMode: ipvs
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>nodes:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>  - role: control-plane
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>    image: kindest/node:v1.19.7@sha256:a70639454e97a4b733f9d9b67e12c01f6b0297449d5b9cbbef87473458e26dca
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>  - role: worker
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    image: kindest/node:v1.19.7@sha256:a70639454e97a4b733f9d9b67e12c01f6b0297449d5b9cbbef87473458e26dca
</span></span></code></pre></div><ol start=3><li>Molecule default 시나리오 설정 수정</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>$ vi molecule/default/molecule.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>---
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>dependency:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>  name: galaxy
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>driver:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>  name: delegated
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>platforms:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>  - name: instance
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>provisioner:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>  name: ansible
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>  inventory:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>    host_vars:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>      localhost:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>        kind_name: myk8s
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>        kind_config: manifests/kindconfig.yaml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>        kube_config: /tmp/kind/kubeconfig.yaml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>verifier:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>  name: ansible
</span></span></code></pre></div><ol start=4><li>Molecule default 시나리오 생성 플레이북 수정</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>$ vi molecule/default/create.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>---
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>- name: Create
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>  hosts: localhost
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  connection: <span style=color:#8be9fd;font-style:italic>local</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>  gather_facts: <span style=color:#8be9fd;font-style:italic>false</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>  tasks:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    - name: Create Kubernetes in Docker
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>      command: &gt;-
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>        kind create cluster
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>          --name <span style=color:#ff79c6>{{</span> kind_name <span style=color:#ff79c6>}}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>          --config <span style=color:#ff79c6>{{</span> kind_config <span style=color:#ff79c6>}}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>          --kubeconfig <span style=color:#ff79c6>{{</span> kube_config <span style=color:#ff79c6>}}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>      changed_when: <span style=color:#8be9fd;font-style:italic>true</span>
</span></span></code></pre></div><ol start=5><li>Molecule default 시나리오 삭제 플레이북 수정</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>$ vi molecule/default/destory.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>---
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>- name: Destroy
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>  hosts: localhost
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  connection: <span style=color:#8be9fd;font-style:italic>local</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>  gather_facts: <span style=color:#8be9fd;font-style:italic>false</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>  tasks:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    - name: Delete Kubernetes in Docker
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>      command: &gt;-
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>        kind delete cluster
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>          --name <span style=color:#ff79c6>{{</span> kind_name <span style=color:#ff79c6>}}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>          --kubeconfig <span style=color:#ff79c6>{{</span> kube_config <span style=color:#ff79c6>}}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>      changed_when: <span style=color:#8be9fd;font-style:italic>true</span>
</span></span></code></pre></div><ol start=6><li>Molecule default 사나리오 환경 구축 플레이북 수정</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>$ vi molecule/default/converge.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>---
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>- name: Converge
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>  hosts: localhost
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  connection: <span style=color:#8be9fd;font-style:italic>local</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>  gather_facts: <span style=color:#8be9fd;font-style:italic>false</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>  collections:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    - community.kubernetes
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>  tasks:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>    - include_role:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>        name: <span style=color:#f1fa8c>&#34;myrole&#34;</span>
</span></span></code></pre></div><ol start=7><li>Molecule default 시나리오 검증 플레이북 수정</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>$ vi molecule/default/verify.yml
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>---
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>- name: Verify
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>  hosts: localhost
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  connection: <span style=color:#8be9fd;font-style:italic>local</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>  gather_facts: <span style=color:#8be9fd;font-style:italic>false</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>  collections:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    - community.kubernetes
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>  tasks:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>    - k8s_info:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>        kind: Namespace
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>        name: <span style=color:#f1fa8c>&#34;myrole-ns&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>        kubeconfig: <span style=color:#f1fa8c>&#34;{{ kube_config }}&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>      register: k8s_info_result
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>    - assert:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>        that: not k8s_info_result.failed
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>        fail_msg: <span style=color:#f1fa8c>&#34;K8S Namespace not exists&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>        success_msg: <span style=color:#f1fa8c>&#34;K8S Namspace exists&#34;</span>
</span></span></code></pre></div><ol start=8><li>Molecule default 시나리오 테스트</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#6272a4># Molecule default 시나리오 테스트 수행</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>$ molecule <span style=color:#8be9fd;font-style:italic>test</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#6272a4># Molecule default 시나리오 환경 구축 (Optional)</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#6272a4>## 쿠버네티스 클러스터와 환경 구축까지만 진행한 상태에서 직접 확인해보고 싶을 때 사용 가능</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>$ molecule converge
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#6272a4># Molecule default 시나리오 환경 제거 (Optional)</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#6272a4>## 수동으로 쿠버네티스 클러스터와 환경 구축을 진행한 경우 직접 삭제를 해줘야 함.</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>$ molecule destory
</span></span></code></pre></div><h2 id=주의사항>주의사항</h2><ul><li>KIND는 base/node 이미지로 구성<ul><li><a href=https://kind.sigs.k8s.io/docs/design/base-image/>base 이미지</a>는 ubuntu, systemd, containers 등의 쿠버네티스가 동작할 수 있는 기반 프로그램이 설치되는 이미지</li><li><a href=https://kind.sigs.k8s.io/docs/design/node-image/>node 이미지</a>는 base 이미지를 기준으로 kubernetes 클러스터 동작을 위한 이미지</li><li>Ubuntu 버전 등의 기반 패키지의 버전을 실 환경과 동일하게 맞추려면, base/node 이미지를 KIND 문서를 참고해서 직접 만들어야 함.</li></ul></li></ul></div></article><div class=blog-post-comments><div id=disqus_thread><script type=text/javascript>(function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="devlog-in-the-sky",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&text=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&title=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&is_video=false&description=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1&body=Check out this article: https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&title=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&title=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&name=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1&description=Ansible%20Molecule%20with%20KIND%20%28Kubernetes%20IN%20Docker%29%20%20Ansible%20Molecule%ec%9d%80%20Ansible%20roles%eb%a5%bc%20%ea%b0%80%ec%83%81%ed%99%94%20%ea%b8%b0%ec%88%a0%ec%9d%84%20%ed%86%b5%ed%95%b4%20%ed%99%98%ea%b2%bd%ec%9d%84%20%ea%b3%a0%eb%a6%bd%ec%8b%9c%ec%bc%9c%ec%84%9c%20%ed%99%98%ea%b2%bd%20%ea%b5%ac%ec%84%b1%ec%9d%84%20%ed%85%8c%ec%8a%a4%ed%8a%b8%ed%95%a0%20%ec%88%98%20%ec%9e%88%ea%b2%8c%20%eb%8f%84%ec%99%80%ec%a3%bc%eb%8a%94%20%eb%8f%84%ea%b5%ac.%20KIND%eb%8a%94%20Kubernetes%20%ed%81%b4%eb%9f%ac%ec%8a%a4%ed%84%b0%eb%a5%bc%20%eb%8f%84%ec%bb%a4%20%ec%bb%a8%ed%85%8c%ec%9d%b4%eb%84%88%eb%a1%9c%20%eb%8f%99%ec%9e%91%ec%8b%9c%ec%bc%9c%ec%a3%bc%eb%8a%94%20%eb%8f%84%ea%b5%ac.%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ed%81%b4%eb%9f%ac%ec%8a%a4%ed%84%b0%20%ec%9c%84%ec%97%90%ec%84%9c%20%eb%a6%ac%ec%86%8c%ec%8a%a4%eb%a5%bc%20%eb%b0%b0%ec%b9%98%ed%95%98%ea%b3%a0%20%eb%a6%ac%ec%86%8c%ec%8a%a4%eb%a5%bc%20%ed%99%95%ec%9d%b8%ed%95%98%ea%b1%b0%eb%82%98%20%ec%96%b4%ed%94%8c%eb%a6%ac%ec%bc%80%ec%9d%b4%ec%85%98%20%eb%8f%99%ec%9e%91%ec%9d%84%20%ea%b2%80%ec%a6%9d%ed%95%98%eb%8a%94%20%ec%9a%a9%eb%8f%84%eb%a1%9c%20%ec%82%ac%ec%9a%a9%ed%95%a8.%20%28ex%2c%20Helm%20Chart%29%20%20%ec%a0%9c%ec%95%bd%ec%82%ac%ed%95%ad%20%20Docker%20Engine%20%ec%84%a4%ec%b9%98%20KIND%20%ec%84%a4%ec%b9%98%20Python%20libraries%20%ec%84%a4%ec%b9%98%20%20pip%20install%20molecule%5bdocker%2clint%5d%20molecule-docker%21%3d0.3.4%20openshift%20%20molecule-docker%200.3.4%20%eb%b2%84%ec%a0%84%ec%9d%80%20%eb%ac%b8%ec%a0%9c%ea%b0%80%20%ec%9e%88%ec%96%b4%20%ec%82%ac%ec%9a%a9%20%ea%b8%88%ec%a7%80%20%20%20%20%20Ansible%20collections%20%ec%84%a4%ec%b9%98%20%20ansible-galaxy%20collection%20install%20community." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fskyoo2003.github.io%2fpost%2f2022%2f05%2f26%2fansible-molecule-with-kind%2f&t=Ansible%20Molecule%20with%20Kind%20-%20%eb%8f%84%ec%bb%a4%eb%a5%bc%20%ed%99%9c%ec%9a%a9%ed%95%9c%20%ec%bf%a0%eb%b2%84%eb%84%a4%ed%8b%b0%ec%8a%a4%20%ec%9e%90%eb%8f%99%ed%99%94%20%ed%85%8c%ec%8a%a4%ed%8a%b8%20%ec%9e%91%ec%84%b1" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 Sung-Kyu Yoo</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
<script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>